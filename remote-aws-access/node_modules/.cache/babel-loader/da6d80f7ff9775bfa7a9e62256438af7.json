{"ast":null,"code":"import _toConsumableArray from\"/Users/nicholaws/Documents/final_year_project/remote-aws-access/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/nicholaws/Documents/final_year_project/remote-aws-access/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/nicholaws/Documents/final_year_project/remote-aws-access/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useCallback,useEffect,useRef}from'react';import useWebSocket,{ReadyState}from'react-use-websocket';import css3 from\"./App.css\";import'bootstrap/dist/css/bootstrap.min.css';import loginIllustrationImg from\"./Login.PNG\";import dashboardImg from\"./images/African-local-football.jpg\";import updateFirmwareIcon from\"./images/updatex.png\";import programANodeIcon from\"./images/progr.png\";import syncGatewayIcon from\"./images/synchronize.png\";import reportIntervalIcon from\"./images/intervall.png\";import dateTimeIcon from\"./images/date-time.png\";import OnOffIcon from\"./images/power-btn.png\";import stationIcon1 from\"./images/weather-station2x.png\";import stationIcon2 from\"./images/weather-station3.png\";import stationIcon3 from\"./images/weather-station2.png\";import stationIcon4 from\"./images/weather-station3.png\";import stationIcon5 from\"./images/weather-station3.png\";import stationIcon6 from\"./images/weather-station2.png\";import wimeaLogoBlurred from\"./images/wimea-logo-blurred.png\";import Header from\"./components/header\";import{useShouldConnect,setShouldConnect}from'./components/globalFlags';import{useShouldIntroduceSelf,setShouldIntroduceSelf}from'./components/globalFlags';import{useCurrentMsg,setCurrentMsg}from'./components/globalFlags';import{useActiveTask,setActiveTask}from'./components/globalFlags';import{useActiveNode,setActiveNode}from'./components/globalFlags';import{useLogin,setLogin}from'./components/globalFlags';import{Button,Navbar,Nav,NavDropdown,Tab,Tabs}from'react-bootstrap';import{Multiselect}from'multiselect-react-dropdown';//const localIpUrl = require('local-ip-url');\nvar App=function App(){var _ReadyState$CONNECTIN;var data=[{'mask':'ADC_1'},{'mask':'ADC_2'},{'mask':'ADC_3'},{'mask':'ADC_4'},{'mask':'RH'},{'mask':'P'},{'mask':'T'},{'mask':'T1'},{'mask':'V_A1'},{'mask':'V_A2'},{'mask':'V_IN'},{'mask':'T_MCU'},{'mask':'V_MCU'},{'mask':'INTR'},{'mask':'P0_LST'},{'mask':'P0_LST60'},{'mask':'WDSPD'},{'mask':'MAXWSD'}];var _useState=useState(data),_useState2=_slicedToArray(_useState,1),options=_useState2[0];var shouldConnect=useShouldConnect();var shouldIntroduceSelf=useShouldIntroduceSelf();var currentMsg=useCurrentMsg();var activeTask=useActiveTask();var activeNode=useActiveNode();var login=useLogin();var stringMsgRef=useRef(React.createElement(React.Fragment,null));var paramsInputRef=useRef(React.createElement(React.Fragment,null));var switchIndicatorRef=useRef(React.createElement(React.Fragment,null));var newIntervalRef=useRef(10);var _useState3=useState('ws://wimea.mak.ac.ug:10026/bridge'),_useState4=_slicedToArray(_useState3,2),socketUrl=_useState4[0],setSocketUrl=_useState4[1];//API that will echo messages sent to it back to the client\nvar _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),messageHistory=_useState6[0],setMessageHistory=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),currentReportingInterval=_useState8[0],setCurrentReportingInterval=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showFeedbackBox=_useState10[0],setShowFeedbackBox=_useState10[1];var _useState11=useState(\"Makerere\"),_useState12=_slicedToArray(_useState11,2),activeStation=_useState12[0],setActiveStation=_useState12[1];var _useState13=useState({Makerere:true,Mubende:true,Entebbe:true,Lwengo:true,KiigeKamuli:true,Jinja:true,Ikulwe:true,KideraBuyende:true}),_useState14=_slicedToArray(_useState13,2),stationSwitch=_useState14[0],setStationSwitch=_useState14[1];//const [activeTask,setActiveTask] = useState(\"reportMask\"); \nvar _useState15=useState(\"Login\"),_useState16=_slicedToArray(_useState15,2),activePage=_useState16[0],setActivePage=_useState16[1];var _useState17=useState(['T','V_IN','V_A1']),_useState18=_slicedToArray(_useState17,2),reportMaskParams=_useState18[0],setReportMaskParams=_useState18[1];var _useState19=useState(\"None\"),_useState20=_slicedToArray(_useState19,2),reportMaskActiveAction=_useState20[0],setReportMaskActiveAction=_useState20[1];//willbe set to 'Add param' or 'Remove param'\nvar _useWebSocket=useWebSocket(socketUrl),_useWebSocket2=_slicedToArray(_useWebSocket,4),sendMessage=_useWebSocket2[0],lastMessage=_useWebSocket2[1],readyState=_useWebSocket2[2],getWebSocket=_useWebSocket2[3];var handleClickChangeSocketUrl=useCallback(function(){return setSocketUrl(\"ws://wimea.mak.ac.ug:10026/echo\");},[]);//const handleClickSendMessage = useCallback((msg)=>{sendMessage(msg)}, [currentMsg]);\nvar handleClickSendDisconnect=useCallback(function(){return sendMessage(\"disconnect wimea.mak.ac.ug:10026\");},[]);useEffect(function(){if(lastMessage!==null){//getWebSocket returns the WebSocket wrapped in a Proxy. This is to restrict actions like \n//mutating a shared websocket, overwriting handlers, etc\nvar currentWebsocketUrl=getWebSocket().url;console.log('received a message from server: ',lastMessage.data.toString());var lastmsg=lastMessage?lastMessage.data.toString():\"\";if(lastMessage&&lastmsg.includes(\"login=ok\")){//'login=ok'\nsetShowFeedbackBox(true);setActivePage(\"Dashboard\");}else if(lastMessage&&lastmsg.includes(\"login=failed\")){//handle login failed error\nalert(\"!! Login failed\");}else if(lastMessage&&lastmsg.includes(\"E64=\")){//handle login failed error\nsetActiveNode(lastMessage.data);console.log('received a message from server: ',lastMessage.data.toString());// alert(\"!! Login failed\");\n}//   setMessageHistory((prev) => prev.concat(lastMessage));\n}},[lastMessage]);var connectionStatus=(_ReadyState$CONNECTIN={},_defineProperty(_ReadyState$CONNECTIN,ReadyState.CONNECTING,'Connecting'),_defineProperty(_ReadyState$CONNECTIN,ReadyState.OPEN,'Open'),_defineProperty(_ReadyState$CONNECTIN,ReadyState.CLOSING,'Closing'),_defineProperty(_ReadyState$CONNECTIN,ReadyState.CLOSED,'Closed'),_ReadyState$CONNECTIN)[readyState];if(readyState===ReadyState.CONNECTING){console.log(\"ws Connecting ...\");}else if(readyState===ReadyState.OPEN&&shouldConnect){console.log(\"ws Connected\");if(shouldConnect){setShouldConnect(false);sendMessage(currentMsg);//connecting to tcp\n}if(shouldIntroduceSelf){setShouldIntroduceSelf(false);sendMessage(\"identity browser\");}console.log(\"tcp Connected\");//let thisMachinesIP = localIpUrl() // => 192.168.31.69\n//let thisMachinesIP = localIpUrl('public') // => 192.168.31.69\n//let thisMachinesIP = localIpUrl('public', 'ipv4') // => 192.168.31.69\n//let thisMachinesIP = localIpUrl('public', 'ipv6') // => fe80::c434:2eff:fe06:f90\n//let thisMachinesIP = localIpUrl('private') // => 127.0.0.1\n//let thisMachinesIP = localIpUrl('private', 'ipv4') // => 127.0.0.1\n//let thisMachinesIP = localIpUrl('private', 'ipv6') // => fe80::1\n//sendMessage(\"identity browserOnIp\"+thisMachinesIP); //connecting to tcp\n}else if(readyState===ReadyState.CLOSING){console.log(\"ws Disconnecting ... \");sendMessage(\"disconnect wimea.mak.ac.ug:10028\");//disconnecting from tcp\nconsole.log(\"tcp Disconnected\");}else if(readyState===ReadyState.CLOSED){console.log(\"ws Disconnected \");//setCurrentMsg(\"connect wimea.mak.ac.ug:10028\");\nsetShouldConnect(true);}var handleLogin=function handleLogin(e){var username=document.getElementById(\"username\").value;var password=document.getElementById(\"password\").value;if(username!==\"\"&&password!==\"\"){sendMessage(\"login username:\"+username+\" password:\"+password+\"\");document.getElementById(\"username\").value=\"\";document.getElementById(\"password\").value=\"\";username=\"\";password=\"\";// setActivePage(\"Dashboard\");\n}else{alert(\"Password and username are required \");setShowFeedbackBox(true);}};var handleMACAddr=function handleMACAddr(node){if(node!==\"\"){sendMessage(\"mac station:\"+activeStation+\" node:\"+node+\"\");}else{alert(\"Password and username are required \");setShowFeedbackBox(true);}};var handleRegister=function handleRegister(e){var username=document.getElementById(\"username\").value;var password=document.getElementById(\"password\").value;if(username!==\"\"&&password!==\"\"){sendMessage(\"register username:\"+username+\" password:\"+password+\"\");document.getElementById(\"username\").value=\"\";document.getElementById(\"password\").value=\"\";username=\"\";password=\"\";}setActivePage(\"Login\");};var triger=function triger(params){setCurrentMsg(params.msg);console.log(\"params.msg = \"+params.msg);sendMessage(params.msg);};var requestForCurrentReportingInterval=function requestForCurrentReportingInterval(){sendMessage(stringMsgRef.current.value+'current');console.log(\"requestForCurrentReportingInterval(\"+stringMsgRef.current.value+'current'+\")\");var lastmsg=lastMessage?lastMessage.data.toString():\"\";if(lastMessage&&lastmsg.includes(\"current-reporting-interval=\")){var intervo=lastmsg.split(\"=\")[1];return intervo;}else{return 15;}};var requestForCurrentReportMaskParams=function requestForCurrentReportMaskParams(){sendMessage(stringMsgRef.current.value+'current');console.log(\"requestForCurrentReportMaskParams(\"+stringMsgRef.current.value+'current'+\")\");var lastmsg=lastMessage?lastMessage.data.toString():\"\";if(lastMessage&&lastmsg.includes(\"current-report-mask=\")){var maskparams=lastmsg.split(\"=\")[1];//update reportMaskParams\nvar tmpArr=maskparams.split(',');setReportMaskParams(_toConsumableArray(tmpArr));return maskparams;}else{return\"T, V_IN, V_A1 \";}};var requestToSwitchStation=function requestToSwitchStation(){sendMessage(stringMsgRef.current.value+(stationSwitch[activeStation]?\"#off\":\"#on\"));console.log(\"requestToSwitchStation(\"+stringMsgRef.current.value+(stationSwitch[activeStation]?\"#off\":\"#on\")+\")\");};var requestToChangeReportingInterval=function requestToChangeReportingInterval(){sendMessage(stringMsgRef.current.value+newIntervalRef.current.value);console.log(\"requestToChangeReportingInterval(\"+stringMsgRef.current.value+newIntervalRef.current.value+\")\");setCurrentReportingInterval(newIntervalRef.current.value);};var requestToChangeReportMask=function requestToChangeReportMask(){//prepare all params as a string\nvar updatedparams='';for(var i in reportMaskParams){updatedparams+='-'+reportMaskParams[i];}sendMessage(stringMsgRef.current.value+'-+'+updatedparams);console.log(\"requestToChangeReportMask(\"+stringMsgRef.current.value+'-+'+updatedparams+\")\");};var addReportMaskParam=function addReportMaskParam(){var newParam=paramsInputRef.current.value;var tempArr=reportMaskParams;if(!tempArr.includes(newParam)){tempArr.push(newParam);}setReportMaskParams(_toConsumableArray(tempArr));};var removeReportMaskParam=function removeReportMaskParam(){var tempArr=reportMaskParams;tempArr.pop();setReportMaskParams(_toConsumableArray(tempArr));};var tabStatusActive=function tabStatusActive(ev){var taskLabel=ev.target.textContent;setReportMaskActiveAction(taskLabel);};if(activePage===\"Login\"||activePage===\"Register\"){return React.createElement(\"div\",null,React.createElement(\"div\",{id:\"root-div\"},React.createElement(Header,{socketStatus:connectionStatus}),React.createElement(\"div\",{id:\"content-div\"},React.createElement(\"div\",{id:\"sidebar-left\"},React.createElement(\"div\",{id:\"usage-div\"},React.createElement(\"h2\",null,\"Usage:\"),\"Start by signing in to go to the dashboard and use the control menu to: \",React.createElement(\"br\",null),React.createElement(\"ul\",null,React.createElement(\"li\",null,\"Program a node \"),React.createElement(\"li\",null,\"Set date / time \"),React.createElement(\"li\",null,\"Change reporting interval \"),React.createElement(\"li\",null,\"Synchronize the gateway \"),React.createElement(\"li\",null,\" Switch on / off a device \")),\"If you want to program a node, you should have the firmware already compiled into a .hex file which you will be required to upload, or if the .hex file is already uploaded to the gateway, then you will be required to send a command instructiong the gateway device on how to use that firmware file.\")),React.createElement(\"div\",{id:\"sidebar-right\"},activePage===\"Register\"?React.createElement(React.Fragment,null,React.createElement(\"div\",{id:\"login-div\"},React.createElement(\"br\",null),React.createElement(\"img\",{src:loginIllustrationImg,width:\"25%\",height:\"25%\",alt:\"\"}),\" \",React.createElement(\"br\",null),\" \",React.createElement(\"br\",null),React.createElement(\"input\",{type:\"text\",placeholder:\" User name\",id:\"username\"}),\" \",React.createElement(\"br\",null),\" \",React.createElement(\"br\",null),React.createElement(\"input\",{type:\"password\",placeholder:\" Password\",id:\"password\"}),\"  \",React.createElement(\"br\",null),\" \",React.createElement(\"br\",null),\" \",React.createElement(\"br\",null),React.createElement(\"input\",{type:\"password\",placeholder:\"Re-type Password\",id:\"password\"}),\"  \",React.createElement(\"br\",null),\" \",React.createElement(\"br\",null),\" \",React.createElement(\"br\",null),React.createElement(\"button\",{id:\"login-btn\",onClick:handleRegister},\"Register\"),React.createElement(\"br\",null),\" \",React.createElement(\"br\",null)),React.createElement(\"div\",{style:{marginLeft:\"14px\",display:\"none\"},onClick:function onClick(){return setActivePage(\"Login\");}},\"Have an account already ? \",React.createElement(\"span\",{style:{color:\"blue\",cursor:\"pointer\"}},\"Sign in\"))):React.createElement(React.Fragment,null,React.createElement(\"div\",{id:\"login-div\"},React.createElement(\"br\",null),React.createElement(\"img\",{src:loginIllustrationImg,width:\"25%\",height:\"25%\",alt:\"\"}),\" \",React.createElement(\"br\",null),\" \",React.createElement(\"br\",null),React.createElement(\"input\",{type:\"text\",placeholder:\" User name\",id:\"username\"}),\" \",React.createElement(\"br\",null),\" \",React.createElement(\"br\",null),React.createElement(\"input\",{type:\"password\",placeholder:\" Password\",id:\"password\"}),\"  \",React.createElement(\"br\",null),\" \",React.createElement(\"br\",null),\" \",React.createElement(\"br\",null),React.createElement(Button,{id:\"login-btn\",onClick:handleLogin},\"Login\"),React.createElement(\"br\",null),\" \",React.createElement(\"br\",null)),React.createElement(\"div\",{style:{marginLeft:\"14px\",display:\"none\"},onClick:function onClick(){return setActivePage(\"Register\");}},\"Have no account ? \",React.createElement(\"span\",{style:{color:\"blue\",cursor:\"pointer\"}},\"Register\")))))),React.createElement(\"div\",{id:\"feeback\",style:{display:showFeedbackBox?\"block\":\"none\"}},\" ... \"));}else if(activePage===\"Dashboard\"){return React.createElement(\"div\",null,React.createElement(\"div\",{id:\"root-div\"},React.createElement(Header,{socketStatus:connectionStatus}),React.createElement(\"div\",{id:\"dashboard-content-div\",style:{width:\"100%\",position:\"relative\",float:\"left\",padding:\"0\",margin:\"0\"}},React.createElement(\"div\",{id:\"dashboard-sidebar-left\",style:{width:\"20%\",position:\"relative\",float:\"left\",margin:\"0\"}},React.createElement(\"div\",{id:\"image-div\",style:{width:\"100%\",position:\"relative\",float:\"left\"}},React.createElement(\"img\",{src:dashboardImg,width:\"100%\",alt:\"\"})),React.createElement(\"div\",{id:\"side-links-div\"},React.createElement(\"div\",{className:activeStation===\"Makerere\"?\"station-link-list active\":\"station-link-list\",onClick:function onClick(){return setActiveStation(\"Makerere\");}},\" \",React.createElement(\"div\",null,React.createElement(\"img\",{src:stationIcon1,width:\"20px\",alt:\"\"})),React.createElement(\"div\",null,\"Makerere\"),\" \"),React.createElement(\"div\",{className:activeStation===\"Mubende\"?\"station-link-list active\":\"station-link-list\",onClick:function onClick(){return setActiveStation(\"Mubende\");}},\" \",React.createElement(\"div\",null,React.createElement(\"img\",{src:stationIcon2,width:\"20px\",alt:\"\"})),React.createElement(\"div\",null,\"Mubende \"),\" \"),React.createElement(\"div\",{className:activeStation===\"Entebbe\"?\"station-link-list active\":\"station-link-list\",onClick:function onClick(){return setActiveStation(\"Entebbe\");}},\" \",React.createElement(\"div\",null,React.createElement(\"img\",{src:stationIcon3,width:\"20px\",alt:\"\"})),React.createElement(\"div\",null,\"Entebbe \"),\" \"),React.createElement(\"div\",{className:activeStation===\"Lwengo\"?\"station-link-list active\":\"station-link-list\",onClick:function onClick(){return setActiveStation(\"Lwengo\");}},\" \",React.createElement(\"div\",null,React.createElement(\"img\",{src:stationIcon4,width:\"20px\",alt:\"\"})),React.createElement(\"div\",null,\"Lwengo \"),\" \"),React.createElement(\"div\",{className:activeStation===\"Kiige-Kamuli\"?\"station-link-list active\":\"station-link-list\",onClick:function onClick(){return setActiveStation(\"Kiige-Kamuli\");}},\" \",React.createElement(\"div\",null,React.createElement(\"img\",{src:stationIcon5,width:\"20px\",alt:\"\"})),React.createElement(\"div\",null,\"Kiige-Kamuli \"),\" \"),React.createElement(\"div\",{className:activeStation===\"Jinja\"?\"station-link-list active\":\"station-link-list\",onClick:function onClick(){return setActiveStation(\"Jinja\");}},\" \",React.createElement(\"div\",null,React.createElement(\"img\",{src:stationIcon6,width:\"20px\",alt:\"\"})),React.createElement(\"div\",null,\"Jinja \"),\" \"),React.createElement(\"div\",{className:activeStation===\"Ikulwe\"?\"station-link-list active\":\"station-link-list\",onClick:function onClick(){return setActiveStation(\"Ikulwe\");}},\" \",React.createElement(\"div\",null,React.createElement(\"img\",{src:stationIcon1,width:\"20px\",alt:\"\"})),React.createElement(\"div\",null,\"Ikulwe \"),\" \"),React.createElement(\"div\",{className:activeStation===\"Kidera-Buyende\"?\"station-link-list active\":\"station-link-list\",onClick:function onClick(){return setActiveStation(\"Kidera-Buyende\");}},\" \",React.createElement(\"div\",null,React.createElement(\"img\",{src:stationIcon4,width:\"20px\",alt:\"\"})),React.createElement(\"div\",null,\"Kidera-Buyende \"),\" \"))),React.createElement(\"div\",{id:\"control-area-parent\",style:{width:\"80%\",position:\"relative\",float:\"left\",padding:\"0\",margin:\"0\"}},React.createElement(\"div\",{style:{background:\"rgb(144,238,144,0.5)\",minHeight:\"10px\",float:\"left\",position:\"relative\",width:\"100%\",textAlign:\"center\"}},React.createElement(\"p\",null,React.createElement(\"b\",null,\"Controlling \",activeStation,\" weather station\"))),React.createElement(\"div\",{id:\"control-area\",style:{width:\"98%\",position:\"relative\",float:\"left\",border:\"2px solid lightgray\",borderRadius:\"6px\",padding:\"5px\",minHeight:\"400px\",margin:\"4px\"}},React.createElement(\"div\",{id:\"control-tools\",style:{width:\"100%\",position:\"relative\",float:\"left\"}},React.createElement(Navbar,{bg:\"light\",expand:\"lg\",variant:\"light\",mb:\"6\"},React.createElement(Navbar.Toggle,{\"aria-controls\":\"basic-navbar-nav\"}),React.createElement(Navbar.Collapse,{id:\"basic-navbar-nav\"},React.createElement(Nav,{className:\"mr-auto\"},React.createElement(NavDropdown,{title:\"Report Interval\"},React.createElement(NavDropdown.Item,{onClick:function onClick(){handleMACAddr(\"2m\");setActiveTask(\"reportInterval\");}},\"2m\"),React.createElement(NavDropdown.Item,{onClick:function onClick(){handleMACAddr(\"10m\");setActiveTask(\"reportInterval\");}},\"10m\"),React.createElement(NavDropdown.Item,{onClick:function onClick(){handleMACAddr(\"gnd\");setActiveTask(\"reportInterval\");}},\"GND\")),React.createElement(NavDropdown,{title:\"Report Mask\"},React.createElement(NavDropdown.Item,{onClick:function onClick(){setActiveTask(\"reportMask\");}},\"2m\"),React.createElement(NavDropdown.Item,{onClick:function onClick(){setActiveTask(\"reportMask\");}},\"10m\"),React.createElement(NavDropdown.Item,{onClick:function onClick(){setActiveTask(\"reportMask\");}},\"GND\")),React.createElement(NavDropdown,{title:\"ON / OFF\"},React.createElement(NavDropdown.Item,{onClick:function onClick(){setActiveTask(\"onOff\");}},\"2m\"),React.createElement(NavDropdown.Item,{onClick:function onClick(){setActiveTask(\"onOff\");}},\"10m\"),React.createElement(NavDropdown.Item,{onClick:function onClick(){setActiveTask(\"onOff\");}},\"GND\")),React.createElement(NavDropdown,{title:\"Change Node Name\"},React.createElement(NavDropdown.Item,{onClick:function onClick(){setActiveTask(\"synchronize\");}},\"2m\"),React.createElement(NavDropdown.Item,{onClick:function onClick(){setActiveTask(\"synchronize\");}},\"10m\"),React.createElement(NavDropdown.Item,{onClick:function onClick(){setActiveTask(\"synchronize\");}},\"GND\"))))),React.createElement(\"div\",{style:{width:\"50%\",position:\"relative\",float:\"left\"}},React.createElement(\"table\",{width:\"100%\"},React.createElement(\"tbody\",null,React.createElement(\"tr\",null,React.createElement(\"td\",null)))))),React.createElement(\"input\",{ref:stringMsgRef,type:\"text\",value:activeTask==\"reportMask\"?\"To \"+activeStation+\" report#\"+activeNode+\"#re#\":activeTask==\"synchronize\"?\"To \"+activeStation+\" report-synchronize\":activeTask==\"reportInterval\"?\"To \"+activeStation+\" report#\"+activeNode+\"#ri#\":activeTask==\"timeDate\"?\"To \"+activeStation+\" report-date\":activeTask==\"onOff\"?\"To \"+activeStation+\" report-on\":null,style:{width:\"80%\",margin:\"60px 0 0 0\",display:\"none\"}}),React.createElement(\"button\",{onClick:function onClick(){return sendMessage(stringMsgRef.current.value);},style:{postion:\"absolute\",bottom:\"0\",right:\"2%\",display:\"none\"}},activeTask),activeTask==\"reportInterval\"?React.createElement(\"div\",{id:\"feeback\",style:{border:\"2px solid limegreen\",padding:\"4px\",marginTop:\"20px\"}},React.createElement(\"h4\",null,\" Reporting  interval \"),React.createElement(\"table\",{width:\"70%\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,\" \",React.createElement(\"td\",null,\"Current interval (in seconds)\"),\" \",React.createElement(\"td\",{colspan:\"2\"},\"Change interval to\"),\" \")),React.createElement(\"tbody\",null,React.createElement(\"tr\",null,React.createElement(\"td\",{style:{fontSize:\"30px\"}},requestForCurrentReportingInterval),React.createElement(\"td\",null,\" \",React.createElement(\"input\",{ref:newIntervalRef,type:\"number\",style:{width:\"90%\",padding:\"4px\",fontSize:\"30px\"}}),\" \"),React.createElement(\"td\",null,\" \",React.createElement(Button,{onClick:requestToChangeReportingInterval},\"Change interval now\"))),React.createElement(\"tr\",null,React.createElement(\"td\",{colspan:\"3\",id:\"changeIntervalFeedback\"},lastMessage&&lastMessage.data.toString().includes(\"changed-reporting-interval\")?React.createElement(React.Fragment,null,React.createElement(\"br\",null),React.createElement(\"hr\",null),lastMessage.data.toString().split(':')[1])://<><br/><hr/>{lastMessage.data.toString()}</>\nReact.createElement(\"small\",null,React.createElement(\"i\",null,React.createElement(\"br\",null),React.createElement(\"hr\",null),\"changing reporting interval to\"),\" \",currentReportingInterval,\" ... \")))))):activeTask==\"reportMask\"?///////////////////\nReact.createElement(\"div\",{id:\"feeback\",style:{border:\"2px solid limegreen\",padding:\"4px\"}},React.createElement(\"h4\",null,\" Report Mask \"),React.createElement(Multiselect,{options:options,displayValue:\"mask\"}),React.createElement(\"table\",{width:\"70%\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,\" \",React.createElement(\"td\",null,\"Current report mask parameters\"),\" \",React.createElement(\"td\",null,\" \"),\" \")),React.createElement(\"tbody\",null,React.createElement(\"tr\",null,React.createElement(\"td\",null),React.createElement(\"td\",{colspan:\"5\"},React.createElement(\"h4\",null,reportMaskParams.length,\" mask parameters\"),\" \",React.createElement(\"h4\",null,reportMaskParams.map(function(param){return', '+param;})),\" \")),React.createElement(\"tr\",null,React.createElement(\"td\",{style:{fontSize:\"30px\"}},requestForCurrentReportMaskParams()),React.createElement(\"td\",null,\" \",React.createElement(\"input\",{ref:paramsInputRef,type:\"text\",style:{width:\"90%\",padding:\"4px\",fontSize:\"30px\"}}),\" \"),React.createElement(\"td\",null,\" \",React.createElement(\"button\",{onClick:addReportMaskParam},\"Add\"),\" \"),React.createElement(\"td\",null,\" \",React.createElement(\"button\",{onClick:removeReportMaskParam},\"Remove\"),\" \"),React.createElement(\"td\",null,\" \",React.createElement(\"button\",{onClick:requestToChangeReportMask},\"Change Mask now\"),\" \")),React.createElement(\"tr\",null,React.createElement(\"td\",{colspan:\"5\",id:\"changeIntervalFeedback\"},lastMessage&&lastMessage.data.toString().includes(\"changed-report-mask\")?React.createElement(React.Fragment,null,React.createElement(\"br\",null),React.createElement(\"hr\",null),lastMessage.data.toString().split(':')[1])://<><br/><hr/>{lastMessage.data.toString()}</>\nReact.createElement(\"small\",null,React.createElement(\"i\",null,React.createElement(\"br\",null),React.createElement(\"hr\",null),\"changing report mask to\"),\" \",reportMaskParams,\" ... \"))))))////////////////\n:activeTask==\"timeDate\"?React.createElement(\"div\",{id:\"feeback\",style:{border:\"2px solid limegreen\",padding:\"4px\"}},\"time Date\"):activeTask==\"synchronize\"?React.createElement(\"div\",{id:\"feeback\",style:{border:\"2px solid limegreen\",padding:\"4px\"}},\"synchronize\"):null)))));}else{return React.createElement(\"div\",null,\"Page switch has a problem\");}};export default App;","map":{"version":3,"sources":["/Users/nicholaws/Documents/final_year_project/remote-aws-access/src/App.js"],"names":["React","useState","useCallback","useEffect","useRef","useWebSocket","ReadyState","css3","loginIllustrationImg","dashboardImg","updateFirmwareIcon","programANodeIcon","syncGatewayIcon","reportIntervalIcon","dateTimeIcon","OnOffIcon","stationIcon1","stationIcon2","stationIcon3","stationIcon4","stationIcon5","stationIcon6","wimeaLogoBlurred","Header","useShouldConnect","setShouldConnect","useShouldIntroduceSelf","setShouldIntroduceSelf","useCurrentMsg","setCurrentMsg","useActiveTask","setActiveTask","useActiveNode","setActiveNode","useLogin","setLogin","Button","Navbar","Nav","NavDropdown","Tab","Tabs","Multiselect","App","data","options","shouldConnect","shouldIntroduceSelf","currentMsg","activeTask","activeNode","login","stringMsgRef","paramsInputRef","switchIndicatorRef","newIntervalRef","socketUrl","setSocketUrl","messageHistory","setMessageHistory","currentReportingInterval","setCurrentReportingInterval","showFeedbackBox","setShowFeedbackBox","activeStation","setActiveStation","Makerere","Mubende","Entebbe","Lwengo","KiigeKamuli","Jinja","Ikulwe","KideraBuyende","stationSwitch","setStationSwitch","activePage","setActivePage","reportMaskParams","setReportMaskParams","reportMaskActiveAction","setReportMaskActiveAction","sendMessage","lastMessage","readyState","getWebSocket","handleClickChangeSocketUrl","handleClickSendDisconnect","currentWebsocketUrl","url","console","log","toString","lastmsg","includes","alert","connectionStatus","CONNECTING","OPEN","CLOSING","CLOSED","handleLogin","e","username","document","getElementById","value","password","handleMACAddr","node","handleRegister","triger","params","msg","requestForCurrentReportingInterval","current","intervo","split","requestForCurrentReportMaskParams","maskparams","tmpArr","requestToSwitchStation","requestToChangeReportingInterval","requestToChangeReportMask","updatedparams","i","addReportMaskParam","newParam","tempArr","push","removeReportMaskParam","pop","tabStatusActive","ev","taskLabel","target","textContent","marginLeft","display","color","cursor","width","position","float","padding","margin","background","minHeight","textAlign","border","borderRadius","postion","bottom","right","marginTop","fontSize","length","map","param"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect, useRef } from 'react';\nimport useWebSocket, { ReadyState } from 'react-use-websocket';\nimport css3 from \"./App.css\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport loginIllustrationImg from \"./Login.PNG\";\nimport dashboardImg from \"./images/African-local-football.jpg\";\nimport updateFirmwareIcon from \"./images/updatex.png\";\nimport programANodeIcon from \"./images/progr.png\";\nimport syncGatewayIcon from \"./images/synchronize.png\";\nimport reportIntervalIcon from \"./images/intervall.png\";\nimport dateTimeIcon from \"./images/date-time.png\";\nimport OnOffIcon from \"./images/power-btn.png\"; \nimport stationIcon1 from \"./images/weather-station2x.png\";\nimport stationIcon2 from \"./images/weather-station3.png\";\nimport stationIcon3 from \"./images/weather-station2.png\";\nimport stationIcon4 from \"./images/weather-station3.png\";\nimport stationIcon5 from \"./images/weather-station3.png\";\nimport stationIcon6 from \"./images/weather-station2.png\";\nimport wimeaLogoBlurred from \"./images/wimea-logo-blurred.png\";\nimport Header from \"./components/header\";\nimport {useShouldConnect, setShouldConnect} from './components/globalFlags';\nimport {useShouldIntroduceSelf, setShouldIntroduceSelf} from './components/globalFlags';\nimport {useCurrentMsg, setCurrentMsg} from './components/globalFlags';\nimport {useActiveTask, setActiveTask} from './components/globalFlags';\nimport {useActiveNode, setActiveNode} from './components/globalFlags';\nimport {useLogin, setLogin} from './components/globalFlags';\nimport {Button, Navbar, Nav, NavDropdown,Tab, Tabs} from 'react-bootstrap';\nimport { Multiselect } from 'multiselect-react-dropdown';\n//const localIpUrl = require('local-ip-url');\n  \nconst App = () => {\n\tconst data = [\n\t\t{'mask':'ADC_1'},\n\t\t{'mask':'ADC_2'},\n\t\t{'mask':'ADC_3'},\n\t\t{'mask':'ADC_4'},\n\t\t{'mask':'RH'},\n\t\t{'mask':'P'},\n\t\t{'mask':'T'},\n\t\t{'mask':'T1'},\n\t\t{'mask':'V_A1'},\n\t\t{'mask':'V_A2'},\n\t\t{'mask':'V_IN'},\n\t\t{'mask':'T_MCU'},\n\t\t{'mask':'V_MCU'},\n\t\t{'mask':'INTR'},\n\t\t{'mask':'P0_LST'},\n\t\t{'mask':'P0_LST60'},\n\t\t{'mask':'WDSPD'},\n\t\t{'mask':'MAXWSD'}\n\t];\n\tconst [options]=useState(data);\n  let shouldConnect = useShouldConnect(); \n  let shouldIntroduceSelf = useShouldIntroduceSelf();\n  let currentMsg = useCurrentMsg();\n  let activeTask = useActiveTask();\n  let activeNode = useActiveNode();\n  let login = useLogin();\n  let stringMsgRef = useRef(<></>); \n  let paramsInputRef = useRef(<></>);\n  let switchIndicatorRef = useRef(<></>);\n  \n  let newIntervalRef = useRef(10); \n  const [socketUrl, setSocketUrl] = useState('ws://wimea.mak.ac.ug:10026/bridge'); //API that will echo messages sent to it back to the client\n  const [messageHistory, setMessageHistory] = useState([]);\n  const [currentReportingInterval, setCurrentReportingInterval] = useState(\"\");\n  const [showFeedbackBox,setShowFeedbackBox] = useState(false);\n  const [activeStation,setActiveStation] = useState(\"Makerere\");\n  const [stationSwitch,setStationSwitch] = useState({Makerere:true,Mubende:true,Entebbe:true,Lwengo:true,KiigeKamuli:true,Jinja:true,Ikulwe:true,KideraBuyende:true});\n  \n  //const [activeTask,setActiveTask] = useState(\"reportMask\"); \n  const [activePage,setActivePage] = useState(\"Login\");\n  const [reportMaskParams,setReportMaskParams] = useState(['T','V_IN','V_A1']);\n  const [reportMaskActiveAction,setReportMaskActiveAction] = useState(\"None\"); //willbe set to 'Add param' or 'Remove param'\n  const [sendMessage, lastMessage, readyState, getWebSocket] = useWebSocket(socketUrl);\n \n  const handleClickChangeSocketUrl = useCallback(() => setSocketUrl(\"ws://wimea.mak.ac.ug:10026/echo\"), []);\n  //const handleClickSendMessage = useCallback((msg)=>{sendMessage(msg)}, [currentMsg]);\n  const handleClickSendDisconnect = useCallback(() => sendMessage(\"disconnect wimea.mak.ac.ug:10026\"),[]);\n   \n  useEffect(() => {\n    if (lastMessage !== null) { \n      //getWebSocket returns the WebSocket wrapped in a Proxy. This is to restrict actions like \n      //mutating a shared websocket, overwriting handlers, etc\n      const currentWebsocketUrl = getWebSocket().url;\n      console.log('received a message from server: ', lastMessage.data.toString());\n      let lastmsg = lastMessage?lastMessage.data.toString():\"\";\n        if(lastMessage && lastmsg.includes(\"login=ok\")){ //'login=ok'\n            setShowFeedbackBox(true);\n\t        setActivePage(\"Dashboard\");\n        }else if(lastMessage && lastmsg.includes(\"login=failed\")){\n            //handle login failed error\n            alert(\"!! Login failed\");\n        } else if(lastMessage && lastmsg.includes(\"E64=\")){\n\t\t\t//handle login failed error\n\t\t\tsetActiveNode(lastMessage.data);\n\t\t\tconsole.log('received a message from server: ', lastMessage.data.toString());\n\t\t\t// alert(\"!! Login failed\");\n\t\t\t\n        }\n    //   setMessageHistory((prev) => prev.concat(lastMessage));\n    }\n  }, [lastMessage]);\n  \n  const connectionStatus = {\n    [ReadyState.CONNECTING]: 'Connecting',\n    [ReadyState.OPEN]: 'Open',\n    [ReadyState.CLOSING]: 'Closing',\n    [ReadyState.CLOSED]: 'Closed',\n  }[readyState];\n  \n  \n  if(readyState === ReadyState.CONNECTING) {\n\t\tconsole.log(\"ws Connecting ...\");\n\t}else if(readyState === ReadyState.OPEN && shouldConnect){\n\t\tconsole.log(\"ws Connected\");\n\t\tif (shouldConnect){\n\t\t    setShouldConnect(false);\n\t\t    sendMessage(currentMsg); //connecting to tcp\n\t\t}\n\t\tif (shouldIntroduceSelf){\n\t\t    setShouldIntroduceSelf(false);\n\t\t    sendMessage(\"identity browser\"); \n\t\t}\n\t\t\n\t\tconsole.log(\"tcp Connected\");\n\t\t//let thisMachinesIP = localIpUrl() // => 192.168.31.69\n\t\t//let thisMachinesIP = localIpUrl('public') // => 192.168.31.69\n\t\t//let thisMachinesIP = localIpUrl('public', 'ipv4') // => 192.168.31.69\n\t\t//let thisMachinesIP = localIpUrl('public', 'ipv6') // => fe80::c434:2eff:fe06:f90\n\t\t//let thisMachinesIP = localIpUrl('private') // => 127.0.0.1\n\t\t//let thisMachinesIP = localIpUrl('private', 'ipv4') // => 127.0.0.1\n\t\t//let thisMachinesIP = localIpUrl('private', 'ipv6') // => fe80::1\n\t\t//sendMessage(\"identity browserOnIp\"+thisMachinesIP); //connecting to tcp\n\t}else if(readyState === ReadyState.CLOSING){\n\t\tconsole.log(\"ws Disconnecting ... \");\n\t\tsendMessage(\"disconnect wimea.mak.ac.ug:10028\"); //disconnecting from tcp\n\t\tconsole.log(\"tcp Disconnected\");\n\t}else if(readyState === ReadyState.CLOSED){\n\t\tconsole.log(\"ws Disconnected \"); \n\t\t//setCurrentMsg(\"connect wimea.mak.ac.ug:10028\");\n\t\tsetShouldConnect(true);\n\t} \n\t \n   const handleLogin = (e)=>{\n\t\tvar username = document.getElementById(\"username\").value;\n\t\tvar password = document.getElementById(\"password\").value;\n\t\tif(username!==\"\" && password!==\"\"){\n\t\t\tsendMessage(\"login username:\"+username+\" password:\"+password+\"\"); \n\t\t\tdocument.getElementById(\"username\").value=\"\";\n\t\t\tdocument.getElementById(\"password\").value=\"\";\n\t\t\tusername=\"\";\n\t\t\tpassword=\"\"; \n\t\t\t// setActivePage(\"Dashboard\");\n\t\t}else{\n\t\t\talert(\"Password and username are required \");\n\t\t\tsetShowFeedbackBox(true); \n\t\t}\n\t}\n\n\tconst handleMACAddr=(node)=>{\n\t\tif(node!==\"\"){\n\t\t\tsendMessage(\"mac station:\"+activeStation+\" node:\"+node+\"\");\n\n\t\t}else{\n\t\t\talert(\"Password and username are required \");\n\t\t\tsetShowFeedbackBox(true); \n\t\t}\n\t}\n\t\n\tconst handleRegister = (e)=>{\n\t\tvar username = document.getElementById(\"username\").value;\n\t\tvar password = document.getElementById(\"password\").value;\n\t\tif(username!==\"\" && password!==\"\"){\n\t\t\tsendMessage(\"register username:\"+username+\" password:\"+password+\"\"); \n\t\t\tdocument.getElementById(\"username\").value=\"\";\n\t\t\tdocument.getElementById(\"password\").value=\"\";\n\t\t\tusername=\"\";\n\t\t\tpassword=\"\"; \n\t\t}\n\t\tsetActivePage(\"Login\");\n\t} \n\t\n\tlet triger = (params)=>{\n\t    setCurrentMsg(params.msg);\n\t    console.log(\"params.msg = \"+params.msg); \n\t    sendMessage(params.msg);\n\t};\n\t\n\tlet requestForCurrentReportingInterval = () => {\n\t    sendMessage(stringMsgRef.current.value+'current');\n\t    console.log(\"requestForCurrentReportingInterval(\"+stringMsgRef.current.value+'current'+\")\");\n\t    let lastmsg = lastMessage?lastMessage.data.toString():\"\";\n\t    if(lastMessage && lastmsg.includes(\"current-reporting-interval=\")){\n\t        let intervo = lastmsg.split(\"=\")[1];\n\t        return intervo;\n\t    }else{\n\t        return 15;\n\t    }\n\t}; \n\tlet requestForCurrentReportMaskParams = () => {\n\t    sendMessage(stringMsgRef.current.value+'current');\n\t    console.log(\"requestForCurrentReportMaskParams(\"+stringMsgRef.current.value+'current'+\")\");\n\t    let lastmsg = lastMessage?lastMessage.data.toString():\"\";\n\t    if(lastMessage && lastmsg.includes(\"current-report-mask=\")){\n\t        let maskparams = lastmsg.split(\"=\")[1];\n\t        //update reportMaskParams\n\t        let tmpArr = maskparams.split(',');\n\t        setReportMaskParams([...tmpArr]);\n\t        return maskparams;\n\t    }else{\n\t        return \"T, V_IN, V_A1 \";\n\t    }\n\t}; \n\t\n\tlet requestToSwitchStation = () => {\n\t    sendMessage(stringMsgRef.current.value+(stationSwitch[activeStation]?\"#off\":\"#on\"));\n\t    console.log(\"requestToSwitchStation(\"+stringMsgRef.current.value+(stationSwitch[activeStation]?\"#off\":\"#on\")+\")\"); \n\t};\n\t\n\tlet requestToChangeReportingInterval = () => {\n\t    sendMessage(stringMsgRef.current.value+newIntervalRef.current.value);\n\t    console.log(\"requestToChangeReportingInterval(\"+stringMsgRef.current.value+newIntervalRef.current.value+\")\"); \n\t    setCurrentReportingInterval(newIntervalRef.current.value);\n\t};\n\t\n\tlet requestToChangeReportMask = () => {\n\t    //prepare all params as a string\n\t    let updatedparams = '';\n\t    for(var i in reportMaskParams){\n\t        updatedparams += '-'+reportMaskParams[i];\n\t    }\n\t    sendMessage(stringMsgRef.current.value+'-+'+updatedparams);\n\t    console.log(\"requestToChangeReportMask(\"+stringMsgRef.current.value+'-+'+updatedparams+\")\");  \n\t};\n\tlet addReportMaskParam = () => { \n\t     let newParam = paramsInputRef.current.value;\n\t     let tempArr = reportMaskParams; \n\t     if(!tempArr.includes(newParam)){\n\t        tempArr.push(newParam); \n\t     }\n\t     setReportMaskParams([...tempArr]);\n\t};\n\tlet removeReportMaskParam = () => {\n\t     let tempArr = reportMaskParams; \n\t     tempArr.pop();\n\t     setReportMaskParams([...tempArr]);\n\t};\n\t\n\tlet tabStatusActive = (ev)=>{\n\t    let taskLabel = ev.target.textContent; \n\t    setReportMaskActiveAction(taskLabel);\n\t}\n\t  \n  if(activePage===\"Login\" || activePage===\"Register\"){\n\t  return (\n\t    <div> \n\t       \n\t      <div id=\"root-div\">\n\n\t\t\t\t<Header socketStatus={connectionStatus}/>\n\t\t\t\t\n\t\t\t\t<div id=\"content-div\">\n\t\t\t\t\t<div id=\"sidebar-left\">\n\t\t\t\t\t\t<div id=\"usage-div\">\n\t\t\t\t\t\t\t<h2>Usage:</h2>\n\t\t\t\t\t\t\tStart by signing in to go to the dashboard and use the control menu to: <br/>\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>Program a node </li>\n\t\t\t\t\t\t\t\t<li>Set date / time </li>\n\t\t\t\t\t\t\t\t<li>Change reporting interval </li>\n\t\t\t\t\t\t\t\t<li>Synchronize the gateway </li> \n\t\t\t\t\t\t\t\t<li> Switch on / off a device </li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\tIf you want to program a node, you should have the firmware already compiled into a .hex file which \n\t\t\t\t\t\t\tyou will be required to upload, or if the .hex file is already uploaded to the gateway, then you will be required \n\t\t\t\t\t\t\tto send a command instructiong the gateway device on how to use that firmware file.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"sidebar-right\">\n\t\t\t\t\t\t{activePage===\"Register\"?\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t<div id=\"login-div\">   \n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<img src={loginIllustrationImg} width=\"25%\" height=\"25%\"  alt=\"\"/> <br/> <br/>\n\t\t\t\t\t\t\t<input type=\"text\"  placeholder=\" User name\" id=\"username\"/> <br/> <br/>\n\t\t\t\t\t\t\t<input type=\"password\" placeholder=\" Password\" id=\"password\"/>  <br/> <br/> <br/>\n\t\t\t\t\t\t\t<input type=\"password\" placeholder=\"Re-type Password\" id=\"password\"/>  <br/> <br/> <br/>\n\t\t\t\t\t\t\t<button id=\"login-btn\" onClick={handleRegister}>Register</button>\n\t\t\t\t\t\t\t<br/> <br/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{marginLeft:\"14px\",display:\"none\"}} onClick={()=>setActivePage(\"Login\")}>Have an account already ? <span style={{color:\"blue\",cursor:\"pointer\"}}>Sign in</span></div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t<div id=\"login-div\">   \n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<img src={loginIllustrationImg} width=\"25%\" height=\"25%\"  alt=\"\"/> <br/> <br/>\n\t\t\t\t\t\t\t<input type=\"text\"  placeholder=\" User name\" id=\"username\"/> <br/> <br/>\n\t\t\t\t\t\t\t<input type=\"password\" placeholder=\" Password\" id=\"password\"/>  <br/> <br/> <br/>\n\t\t\t\t\t\t\t<Button id=\"login-btn\" onClick={handleLogin}>Login</Button>\n\t\t\t\t\t\t\t<br/> <br/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{marginLeft:\"14px\",display:\"none\"}} onClick={()=>setActivePage(\"Register\")}>Have no account ? <span style={{color:\"blue\",cursor:\"pointer\"}}>Register</span></div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div>\n\t\t\t<div id=\"feeback\" style={{display:showFeedbackBox?\"block\":\"none\"}}> ... </div> \n\t    </div>\n\t  );\n\t}else if(activePage===\"Dashboard\"){\n\t\treturn (\n\t    <div>\n\t      <div id=\"root-div\">\n \n\t\t\t\t<Header socketStatus={connectionStatus}/>\n\t\t\t\t\n\t\t\t\t<div id=\"dashboard-content-div\" style={{width:\"100%\",position:\"relative\",float:\"left\",padding:\"0\",margin:\"0\"}}>\n\t\t\t\t\t<div id=\"dashboard-sidebar-left\" style={{width:\"20%\",position:\"relative\",float:\"left\",margin:\"0\"}}>\n\t\t\t\t\t\t<div id=\"image-div\" style={{width:\"100%\",position:\"relative\",float:\"left\"}}>\n\t\t\t\t\t\t\t<img src={dashboardImg} width=\"100%\" alt=\"\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div id=\"side-links-div\"> \n\t\t\t\t\t\t\t<div className={(activeStation===\"Makerere\")?\"station-link-list active\":\"station-link-list\"} onClick={()=>setActiveStation(\"Makerere\")}> <div><img src={stationIcon1} width=\"20px\" alt=\"\"/></div><div>Makerere</div> </div>\n\t\t\t\t\t\t\t<div className={(activeStation===\"Mubende\")?\"station-link-list active\":\"station-link-list\"} onClick={()=>setActiveStation(\"Mubende\")}> <div><img src={stationIcon2} width=\"20px\" alt=\"\"/></div><div>Mubende </div> </div>\n\t\t\t\t\t\t\t<div className={(activeStation===\"Entebbe\")?\"station-link-list active\":\"station-link-list\"} onClick={()=>setActiveStation(\"Entebbe\")}> <div><img src={stationIcon3} width=\"20px\" alt=\"\"/></div><div>Entebbe </div> </div>\n\t\t\t\t\t\t\t<div className={(activeStation===\"Lwengo\")?\"station-link-list active\":\"station-link-list\"} onClick={()=>setActiveStation(\"Lwengo\")}> <div><img src={stationIcon4} width=\"20px\" alt=\"\"/></div><div>Lwengo </div> </div>\n\t\t\t\t\t\t\t<div className={(activeStation===\"Kiige-Kamuli\")?\"station-link-list active\":\"station-link-list\"} onClick={()=>setActiveStation(\"Kiige-Kamuli\")}> <div><img src={stationIcon5} width=\"20px\" alt=\"\"/></div><div>Kiige-Kamuli </div> </div>\n\t\t\t\t\t\t\t<div className={(activeStation===\"Jinja\")?\"station-link-list active\":\"station-link-list\"} onClick={()=>setActiveStation(\"Jinja\")}> <div><img src={stationIcon6} width=\"20px\" alt=\"\"/></div><div>Jinja </div> </div>\n\t\t\t\t\t\t\t<div className={(activeStation===\"Ikulwe\")?\"station-link-list active\":\"station-link-list\"} onClick={()=>setActiveStation(\"Ikulwe\")}> <div><img src={stationIcon1} width=\"20px\" alt=\"\"/></div><div>Ikulwe </div> </div>\n\t\t\t\t\t\t\t<div className={(activeStation===\"Kidera-Buyende\")?\"station-link-list active\":\"station-link-list\"} onClick={()=>setActiveStation(\"Kidera-Buyende\")}> <div><img src={stationIcon4} width=\"20px\" alt=\"\"/></div><div>Kidera-Buyende </div> </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div id=\"control-area-parent\" style={{width:\"80%\",position:\"relative\",float:\"left\",padding:\"0\",margin:\"0\"}}>\n\t\t\t\t\t<div style={{background:\"rgb(144,238,144,0.5)\",minHeight:\"10px\",float:\"left\",position:\"relative\", width:\"100%\",textAlign:\"center\"}}> \n\t\t\t\t\t\t<p><b>Controlling {activeStation} weather station</b></p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"control-area\" style={{width:\"98%\",position:\"relative\",float:\"left\", border:\"2px solid lightgray\",borderRadius:\"6px\",padding:\"5px\",minHeight:\"400px\",margin:\"4px\"}}>\n\t\t\t\t\t\t<div id=\"control-tools\" style={{width:\"100%\",position:\"relative\",float:\"left\"}}>\n\t\t\t\t\t\t\t<Navbar bg=\"light\" expand=\"lg\" variant=\"light\" mb=\"6\">\n\t\t\t\t\t\t\t\t<Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n\t\t\t\t\t\t\t\t<Navbar.Collapse id=\"basic-navbar-nav\">\n\t\t\t\t\t\t\t\t\t<Nav className=\"mr-auto\">\n\t\t\t\t\t\t\t\t\t<NavDropdown title=\"Report Interval\" >\n\t\t\t\t\t\t\t\t\t\t<NavDropdown.Item onClick={ ()=>{handleMACAddr(\"2m\"); setActiveTask(\"reportInterval\"); } }>2m</NavDropdown.Item>\n\t\t\t\t\t\t\t\t\t\t<NavDropdown.Item onClick={ ()=>{handleMACAddr(\"10m\"); setActiveTask(\"reportInterval\"); } }>10m</NavDropdown.Item>\n\t\t\t\t\t\t\t\t\t\t<NavDropdown.Item onClick={ ()=>{handleMACAddr(\"gnd\"); setActiveTask(\"reportInterval\"); } }>GND</NavDropdown.Item>\n\t\t\t\t\t\t\t\t\t</NavDropdown>\n\t\t\t\t\t\t\t\t\t<NavDropdown title=\"Report Mask\" >\n\t\t\t\t\t\t\t\t\t\t<NavDropdown.Item onClick={ ()=>{ setActiveTask(\"reportMask\");} }>2m</NavDropdown.Item>\n\t\t\t\t\t\t\t\t\t\t<NavDropdown.Item onClick={ ()=>{setActiveTask(\"reportMask\"); } }>10m</NavDropdown.Item>\n\t\t\t\t\t\t\t\t\t\t<NavDropdown.Item onClick={ ()=>{setActiveTask(\"reportMask\"); } }>GND</NavDropdown.Item>\n\t\t\t\t\t\t\t\t\t</NavDropdown>\n\t\t\t\t\t\t\t\t\t<NavDropdown title=\"ON / OFF\" >\n\t\t\t\t\t\t\t\t\t\t<NavDropdown.Item onClick={ ()=>{setActiveTask(\"onOff\"); } }>2m</NavDropdown.Item>\n\t\t\t\t\t\t\t\t\t\t<NavDropdown.Item onClick={ ()=>{setActiveTask(\"onOff\"); } }>10m</NavDropdown.Item>\n\t\t\t\t\t\t\t\t\t\t<NavDropdown.Item onClick={ ()=>{setActiveTask(\"onOff\"); } }>GND</NavDropdown.Item>\n\t\t\t\t\t\t\t\t\t</NavDropdown>\n\t\t\t\t\t\t\t\t\t<NavDropdown title=\"Change Node Name\" >\n\t\t\t\t\t\t\t\t\t\t<NavDropdown.Item onClick={ ()=>{setActiveTask(\"synchronize\"); } }>2m</NavDropdown.Item>\n\t\t\t\t\t\t\t\t\t\t<NavDropdown.Item onClick={ ()=>{setActiveTask(\"synchronize\"); } }>10m</NavDropdown.Item>\n\t\t\t\t\t\t\t\t\t\t<NavDropdown.Item onClick={ ()=>{setActiveTask(\"synchronize\"); } }>GND</NavDropdown.Item>\n\t\t\t\t\t\t\t\t\t</NavDropdown>\n\t\t\t\t\t\t\t\t\t</Nav>\n\t\t\t\t\t\t\t\t</Navbar.Collapse>\n\t\t\t\t\t\t\t</Navbar>\n\t\t\t\t\t\t\t {/* <div style={{width:\"100%\",position:\"relative\",float:\"left\"}}>\n\n\t\t\t\t\t\t\t\t<table width=\"100%\">\n\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t<tr> \n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<div onClick={ ()=>setActiveTask(\"reportInterval\") } ><img src={reportIntervalIcon} width=\"20px\" alt=\"Report interval\"/> Report interval </div> \n\t\t\t\t\t\t\t\t\t\t\t\t<div width=\"100%\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<select>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option>2m</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option>10m</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option>Gnd</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t<td><div onClick={ ()=>{setActiveTask(\"reportMask\"); } } ><img src={programANodeIcon} width=\"20px\" alt=\"reportMask\"/> Report Mask </div> </td>\n\t\t\t\t\t\t\t\t\t\t\t<td><div onClick={()=>setActiveTask(\"onOff\")} ><img src={OnOffIcon} width=\"20px\" alt=\"On / Off\"/> On / Off </div> </td>\n\t\t\t\t\t\t\t\t\t\t\t<td><div onClick={ ()=>setActiveTask(\"synchronize\") } ><img src={syncGatewayIcon} width=\"20px\" alt=\"synchronize\"/> Synchronize </div> </td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</tbody> \n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t<div style={{width:\"50%\", position:\"relative\",float:\"left\"}}>\n\t\t\t\t\t\t\t\t<table width=\"100%\">\n\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t<tr> \n\t\t\t\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t<input  ref={stringMsgRef} type=\"text\" value={activeTask==\"reportMask\"?\"To \"+activeStation+\" report#\"+activeNode+\"#re#\"\n\t\t\t\t\t\t\t:activeTask==\"synchronize\"?\"To \"+activeStation+\" report-synchronize\":\n\t\t\t\t\t\t    activeTask==\"reportInterval\"?\"To \"+activeStation+\" report#\"+activeNode+\"#ri#\":activeTask==\"timeDate\"?\"To \"+activeStation+\" report-date\":\n\t\t\t\t\t\t    activeTask==\"onOff\"?\"To \"+activeStation+\" report-on\":null} style={{width:\"80%\", margin:\"60px 0 0 0\",display:\"none\"}} />\n\t\t\t\t\t\t    <button onClick={()=>sendMessage(stringMsgRef.current.value) } style={{postion:\"absolute\", bottom:\"0\", right:\"2%\",display:\"none\"}}>\n\t\t\t\t\t\t        {activeTask}\n\t\t\t\t\t\t    </button>  \n\t\t\t\t\t\t    {activeTask==\"reportInterval\"?\n\t\t\t\t\t\t    <div id=\"feeback\" style={{border:\"2px solid limegreen\", padding:\"4px\", marginTop:\"20px\"}}> \n\t\t\t\t\t\n\t\t\t\t\t\t        <h4> Reporting  interval </h4>\n\t\t\t\t\t\t        <table width=\"70%\">\n\t\t\t\t\t\t            <thead>\n\t\t\t\t\t\t                <tr> <td>Current interval (in seconds)</td> <td colspan=\"2\">Change interval to</td> </tr>\n\t\t\t\t\t\t            </thead>\n\t\t\t\t\t\t            <tbody>\n\t\t\t\t\t\t                <tr>\n\t\t\t\t\t\t                    <td style={{fontSize:\"30px\"}}>{requestForCurrentReportingInterval}</td>\n\t\t\t\t\t\t                    <td> <input ref={newIntervalRef} type=\"number\" style={{width:\"90%\",padding:\"4px\",fontSize:\"30px\"}}/> </td> \n\t\t\t\t\t\t                    <td> <Button onClick={requestToChangeReportingInterval}>Change interval now</Button></td> \n\t\t\t\t\t\t                </tr>\n\t\t\t\t\t\t                <tr>\n\t\t\t\t\t\t                    <td colspan=\"3\" id=\"changeIntervalFeedback\">\n\t\t\t\t\t\t                        {\n\t\t\t\t\t\t                        (lastMessage && lastMessage.data.toString().includes(\"changed-reporting-interval\"))?\n\t\t\t\t\t\t                        <><br/><hr/>{lastMessage.data.toString().split(':')[1]}</>:\n\t\t\t\t\t\t                        //<><br/><hr/>{lastMessage.data.toString()}</>\n\t\t\t\t\t\t                        <small><i><br/><hr/>changing reporting interval to</i> {currentReportingInterval} ... </small>\n\t\t\t\t\t\t                        }\n\t\t\t\t\t\t                    </td> \n\t\t\t\t\t\t                </tr>\n\t\t\t\t\t\t            </tbody>\n\t\t\t\t\t\t        </table>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t:activeTask==\"reportMask\"?\n\t\t\t\t\t\t    ///////////////////\n\t\t\t\t\t\t    <div id=\"feeback\" style={{border:\"2px solid limegreen\", padding:\"4px\" }}> \n\t\t\t\t\t\t        \n\t\t\t\t\t\t        <h4> Report Mask </h4>\n\t\t\t\t\t\t\t\t<Multiselect options={options} displayValue=\"mask\" />\n\t\t\t\t\t\t        <table width=\"70%\">\n\t\t\t\t\t\t            <thead>\n\t\t\t\t\t\t                <tr> <td>Current report mask parameters</td> <td > </td> </tr>\n\t\t\t\t\t\t            </thead>\n\t\t\t\t\t\t            <tbody>\n\t\t\t\t\t\t                <tr><td></td><td colspan=\"5\"><h4>{reportMaskParams.length} mask parameters</h4> <h4>{reportMaskParams.map(function(param){ return ', '+param; })}</h4> </td></tr>\n\t\t\t\t\t\t                <tr>\n\t\t\t\t\t\t                    <td style={{fontSize:\"30px\"}}>{requestForCurrentReportMaskParams()}</td>\n\t\t\t\t\t\t                    <td> <input ref={paramsInputRef} type=\"text\" style={{width:\"90%\",padding:\"4px\",fontSize:\"30px\"}}/> </td> \n\n\t\t\t\t\t\t                    <td> <button onClick={addReportMaskParam}>Add</button> </td> \n\t\t\t\t\t\t                    <td> <button onClick={removeReportMaskParam}>Remove</button> </td>\n\t\t\t\t\t\t                    <td> <button onClick={requestToChangeReportMask}>Change Mask now</button> </td>\n\t\t\t\t\t\t                </tr>\n\t\t\t\t\t\t                <tr>\n\t\t\t\t\t\t                    <td colspan=\"5\" id=\"changeIntervalFeedback\">\n\t\t\t\t\t\t                        {\n\t\t\t\t\t\t                        (lastMessage && lastMessage.data.toString().includes(\"changed-report-mask\"))?\n\t\t\t\t\t\t                        <><br/><hr/>{lastMessage.data.toString().split(':')[1]}</>:\n\t\t\t\t\t\t                        //<><br/><hr/>{lastMessage.data.toString()}</>\n\t\t\t\t\t\t                        <small><i><br/><hr/>changing report mask to</i> {reportMaskParams} ... </small>\n\t\t\t\t\t\t                        }\n\t\t\t\t\t\t                    </td> \n\t\t\t\t\t\t                </tr>\n\t\t\t\t\t\t            </tbody>\n\t\t\t\t\t\t        </table>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t////////////////\n\n\t\t\t\t\t\t\t:activeTask==\"timeDate\"?\n\t\t\t\t\t\t    <div id=\"feeback\" style={{border:\"2px solid limegreen\", padding:\"4px\" }}> \n\t\t\t\t\t\t        time Date\n\t\t\t\t\t\t    </div>:activeTask==\"synchronize\"?\n\t\t\t\t\t\t    <div id=\"feeback\" style={{border:\"2px solid limegreen\", padding:\"4px\" }}> \n\t\t\t\t\t\t        synchronize\n\t\t\t\t\t\t    </div>:null\n\t\t\t\t\t\t    }\n\t\t\t\t\t\t    \n\t\t\t\t\t\t</div> \n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div>\n\t\t\t\n\t    </div>\n\t  );\n\t}else{\n\t    return (\n\t        <div>\n\t            Page switch has a problem\n\t        </div>\n\t    );\n\t}\n  \n}\n \nexport default App;\n \n \n \n \n"]},"metadata":{},"sourceType":"module"}